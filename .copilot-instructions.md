# PA2: Cipher Decryption Assignment - Copilot Instructions

## Project Overview
This is CMPS 357 Programming Assignment 2 (PA2) focused on classical cipher decryption. The project implements a comprehensive cipher analysis system that can decrypt text files using multiple cipher types and evaluate the quality of potential decryptions using linguistic heuristics.

## Project Structure and Architecture

### Core Components
1. **Cipher Implementations**: Three classical cipher types
2. **Heuristic Evaluation System**: Four different text quality assessment methods
3. **File Processing**: Batch processing of encrypted text files
4. **Brute Force Search**: Automated key discovery for cipher decryption

### Key Classes and Their Purposes

#### Cipher Classes
- `CaesarCipher.java`: Implements Caesar cipher with configurable shift values
- `VigenereCipher.java`: Polyalphabetic cipher using repeating key strings  
- `AffineCipher.java`: Mathematical cipher using linear transformation formula E(x) = (ax + b) mod m
- `CipherUtils.java`: Shared utilities including the 65-character alphabet: `abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.:;'!?`

#### Heuristic Classes
- `LetterFrequencyHeuristic.java`: Compares letter frequency distributions against English
- `DictionaryHeuristic.java`: Counts valid English words using wordlist.txt
- `GraphemeHeuristic.java`: Analyzes common letter combinations and patterns
- `NgramHeuristic.java`: Evaluates n-gram patterns (configurable n, typically trigrams)

#### Processing Classes
- `FileProcessor.java`: Demonstrates file processing from INPUT/ directory
- `BruteForceSearch.java`: Automated cipher breaking with heuristic scoring
- `DecryptionCandidate.java`: Data structure for storing and comparing decryption attempts
- `HeuristicTest.java`: Testing framework for heuristic evaluation

## Important Design Patterns and Conventions

### Cipher Interface Pattern
All cipher classes follow consistent method signatures:
- `String encrypt(String plaintext)` 
- `String decrypt(String ciphertext)`
- `String getKey()` or equivalent key retrieval methods

### Space Handling Convention
**Critical**: Spaces in text are ALWAYS preserved unchanged through encryption/decryption. This is explicitly required by the assignment and implemented consistently across all ciphers.

### Alphabet Usage
- Uses a custom 65-character alphabet defined in `CipherUtils.ALPHABET`
- Characters not in this alphabet are passed through unchanged
- All cipher operations use modular arithmetic with alphabet size (65)

### Heuristic Interface
All heuristics implement the `Heuristic` interface:
- `double analyze(String text)`: Returns score between 0.0-1.0 (higher = more English-like)
- `String getName()`: Returns heuristic name for display
- `String getSummary()`: Returns detailed analysis summary

## File Organization and Data Flow

### INPUT Directory Processing
- All encrypted files are in `INPUT/` directory with `.txt` extensions
- `FileProcessor` demonstrates basic file reading and cipher testing
- `BruteForceSearch` provides production-level batch decryption

### Wordlist Integration
- `wordlist.txt` contains dictionary words for `DictionaryHeuristic`
- Case-insensitive word matching
- Handles punctuation and special characters appropriately

## Coding Standards and Best Practices

### Error Handling
- Cipher constructors validate parameters (e.g., Affine cipher checks coprimality)
- Graceful handling of characters outside the defined alphabet
- File I/O errors are caught and reported appropriately

### Documentation Style
- Comprehensive JavaDoc comments for all public methods
- Clear parameter and return value documentation
- Implementation notes for complex algorithms (especially Affine cipher math)

### Testing Patterns
- Each cipher is tested with round-trip encryption/decryption verification
- Multiple test cases with different keys and text samples
- Heuristic testing uses both known English text and cipher text samples

## Assignment Context and Academic Integrity

### Learning Objectives
Students must implement cipher decryption systems and understand:
- Classical cryptography principles
- Text analysis and linguistic pattern recognition
- Algorithm implementation and optimization
- File processing and batch operations

### AI Usage Guidelines
This assignment requires students to document AI tool usage in the README.md file, including:
- Which tools were used
- How they were applied
- Reflection on what worked vs. what required manual implementation
- Learning experiences and process improvements

## Development Guidelines for AI Assistants

### When Contributing Code
1. **Maintain Consistency**: Follow existing patterns for cipher implementations and heuristic interfaces
2. **Preserve Space Handling**: Never modify the space-preservation behavior
3. **Use Existing Alphabet**: Always reference `CipherUtils.ALPHABET` for character operations
4. **Follow Math Patterns**: Affine cipher uses specific mathematical formulas - preserve them exactly
5. **Test Thoroughly**: Verify round-trip encryption/decryption works correctly

### When Suggesting Improvements
1. **Maintain Academic Requirements**: Don't suggest changes that would violate assignment constraints
2. **Focus on Code Quality**: Improvements should enhance readability, efficiency, or maintainability
3. **Preserve Educational Value**: Avoid over-simplifying code that students need to understand deeply

### Common Pitfalls to Avoid
1. **Character Set Issues**: Don't assume standard ASCII - use the custom 65-character alphabet
2. **Space Handling**: Never encrypt/decrypt spaces - they pass through unchanged
3. **Modular Arithmetic**: Use alphabet size (65) as modulus, not 26
4. **Key Validation**: Affine cipher requires 'a' value to be coprime with 65
5. **Case Sensitivity**: The alphabet includes both cases - handle them as distinct characters

## Testing and Validation

### Verification Methods
- Run `java CipherTest` to verify cipher implementations
- Run `java FileProcessor` to test file handling with INPUT directory
- Run `java HeuristicTest` to validate text analysis methods
- Use provided sample files to test full decryption pipeline

### Expected Behaviors
- Caesar cipher with shift 7 should transform "the quick brown fox jumps over thirteen lazy dogs..." to "Aol xBpjr iyvDu mvE qBtwz vCly AopyAllu shGF kvnzbbb"
- All ciphers should produce identical output when decrypting their own encrypted text
- Heuristics should score English text higher than random or encrypted text